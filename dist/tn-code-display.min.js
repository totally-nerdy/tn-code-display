class CodeDisplay extends HTMLElement{constructor(){super();const i='<svg fill="#000" width="24" height="24" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 0a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5.5.5 0 0 1 .5.5V2a.5.5 0 0 1-.5.5h-5A.5.5 0 0 1 5 2v-.5a.5.5 0 0 1 .5-.5.5.5 0 0 0 .5-.5.5.5 0 0 1 .5-.5z"/><path d="M3.5 1h.585A1.5 1.5 0 0 0 4 1.5V2a1.5 1.5 0 0 0 1.5 1.5h5A1.5 1.5 0 0 0 12 2v-.5q-.001-.264-.085-.5h.585A1.5 1.5 0 0 1 14 2.5v12a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 14.5v-12A1.5 1.5 0 0 1 3.5 1"/></svg>';switch(this._textarea=this.firstElementChild,this._code=this._textarea.value,this._prettyCode="",this._language=this.getAttribute("data-language"),this._style=this.getAttribute("data-style")||"monokai-sublime",this._loadingColor=this.getAttribute("data-loading-color")||"#10c100",this._clipboard=Boolean(this.getAttribute("data-clipboard")||!1),this._scripts=["https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"],this._removeLoadingImage=function(e){e.shadowRoot.querySelector("svg").remove()},this._appendStyles=function(e){var t=document.createElement("style");t.innerHTML=`
        @import '//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/${e._style}.min.css';
        #container {
          position: relative;
        }
        #clipboard {
          display: none;
          position: absolute;
          top: 0;
          right: 0;
          margin-top: 4px;
          margin-right: 4px;
          padding: 4px;
          background-color: #fff;
          border-radius: 2px;
          cursor: pointer;
        }
        `,e.shadowRoot.appendChild(t)},this._display=function(e){"undefined"!=typeof prettier?e._prettyCode=prettier.format(e._code,{parser:e._parser,plugins:prettierPlugins}):e._prettyCode=e._code;var t=document.createElement("template");t.innerHTML=`<pre id="container"><code class="language-${e._language}"></code><div id="clipboard">${i}</div></pre>`,e.shadowRoot.appendChild(t.content.cloneNode(!0)),e.shadowRoot.querySelector("pre code").appendChild(document.createTextNode(e._prettyCode)),this._clipboard&&""!==e._prettyCode&&(e.shadowRoot.querySelector("pre").addEventListener("mouseenter",this._onMouseEnter),e.shadowRoot.querySelector("pre").addEventListener("mouseleave",this._onMouseLeave),e.shadowRoot.querySelector('pre div[id="clipboard"]').addEventListener("click",this._onClickClipboard.bind(this))),hljs.highlightElement(e.shadowRoot.querySelector("pre code"))},this._loadScriptsAndDisplay=function(t){var e=t._scripts.shift(),i=document.createElement("script");t.shadowRoot.appendChild(i),i.onload=function(e){t._scripts.length?t._loadScriptsAndDisplay(t):(t._appendStyles(t),t._removeLoadingImage(t),t._display(t))},i.src=e},this._onMouseEnter=function(e){e.target.querySelector('div[id="clipboard"]').style.display="block"},this._onMouseLeave=function(e){var e=e.target.querySelector('div[id="clipboard"]'),t=(e.style.display="none",document.createElement("template"));t.innerHTML=i,e.replaceChildren(t.content.cloneNode(!0))},this._onClickClipboard=function(){var e=this.shadowRoot.querySelector('div[id="clipboard"]'),t=(navigator.clipboard.writeText(this._prettyCode),document.createElement("template"));t.innerHTML='<svg fill="#000" width="24" height="24" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M10 .5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5.5.5 0 0 1-.5.5.5.5 0 0 0-.5.5V2a.5.5 0 0 0 .5.5h5A.5.5 0 0 0 11 2v-.5a.5.5 0 0 0-.5-.5.5.5 0 0 1-.5-.5"/><path d="M4.085 1H3.5A1.5 1.5 0 0 0 2 2.5v12A1.5 1.5 0 0 0 3.5 16h9a1.5 1.5 0 0 0 1.5-1.5v-12A1.5 1.5 0 0 0 12.5 1h-.585q.084.236.085.5V2a1.5 1.5 0 0 1-1.5 1.5h-5A1.5 1.5 0 0 1 4 2v-.5q.001-.264.085-.5m6.769 6.854-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708.708"/></svg>',e.replaceChildren(t.content.cloneNode(!0))},this._onChange=function(){this.shadowRoot.querySelector("pre").remove(),this._code=this._textarea.value,this._display(this)},this._language){case"css":this._scripts.push("https://www.unpkg.com/prettier@2.8.3/standalone.js"),this._scripts.push("https://www.unpkg.com/prettier@2.8.3/parser-postcss.js"),this._parser="css";break;case"scss":this._scripts.push("https://www.unpkg.com/prettier@2.8.3/standalone.js"),this._scripts.push("https://www.unpkg.com/prettier@2.8.3/parser-postcss.js"),this._parser="scss";break;case"less":this._scripts.push("https://www.unpkg.com/prettier@2.8.3/standalone.js"),this._scripts.push("https://www.unpkg.com/prettier@2.8.3/parser-postcss.js"),this._parser="less";break;case"javascript":this._scripts.push("https://www.unpkg.com/prettier@2.8.3/standalone.js"),this._scripts.push("https://www.unpkg.com/prettier@2.8.3/parser-meriyah.js"),this._parser="meriyah";break;case"html":this._scripts.push("https://www.unpkg.com/prettier@2.8.3/standalone.js"),this._scripts.push("https://www.unpkg.com/prettier@2.8.3/parser-html.js"),this._parser="html"}this.attachShadow({mode:"open"}),this._textarea.addEventListener("input",this._onChange.bind(this));var e=document.createElement("template");e.innerHTML='<svg fill="%LOADING_COLOR%" height="20" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg"><circle cx="15" cy="15" r="15"><animate attributeName="r" begin="0s" calcMode="linear" dur="0.8s" from="15" repeatCount="indefinite" to="15" values="15;9;15"/><animate attributeName="fill-opacity" begin="0s" calcMode="linear" dur="0.8s" from="1" repeatCount="indefinite" to="1" values="1;.5;1"/></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" begin="0s" calcMode="linear" dur="0.8s" from="9" repeatCount="indefinite" to="9" values="9;15;9"/><animate attributeName="fill-opacity" begin="0s" calcMode="linear" dur="0.8s" from="0.5" repeatCount="indefinite" to="0.5" values=".5;1;.5"/></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" begin="0s" calcMode="linear" dur="0.8s" from="15" repeatCount="indefinite" to="15" values="15;9;15"/><animate attributeName="fill-opacity" begin="0s" calcMode="linear" dur="0.8s" from="1" repeatCount="indefinite" to="1" values="1;.5;1"/></circle></svg>'.replace("%LOADING_COLOR%",this._loadingColor),this.shadowRoot.appendChild(e.content.cloneNode(!0)),this._loadScriptsAndDisplay(this)}}customElements.define("tn-code-display",CodeDisplay);